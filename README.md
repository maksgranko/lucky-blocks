# LuckyBlocks — плагин и конфигурация

## Описание

LuckyBlocks — расширяемый плагин для Minecraft, реализующий уникальные лакиблоки с гибкой системой событий, уровней и типов. Все детали управляются YAML-конфигами, что максимально удобно для кастомизации и интеграции на сервер.

---

## Структура проекта

Проект организован следующим образом:

```
.
├── .gitignore
├── Just Replace Plugin.bat
├── pom.xml
├── README.md
└── src/
    └── main/
        ├── java/
        │   └── net/
        │       └── ayronix/
        │           └── luckyblocks/
        │               ├── BlockBreakListener.java
        │               ├── BlockData.java
        │               ├── BlockPlaceListener.java
        │               ├── BlockProtectionListener.java
        │               ├── ConfigManager.java
        │               ├── EventAnimationUtil.java
        │               ├── EventChainUtil.java
        │               ├── ExplosionListener.java
        │               ├── LuckyBlockCommand.java
        │               ├── LuckyBlockPlugin.java
        │               ├── LuckyBlockReplaceManager.java
        │               ├── LuckyBlockTabCompleter.java
        │               ├── ProbabilityCalculator.java
        │               ├── Replacer.java
        │               └── events/
        │                   ├── CommandExecEvent.java
        │                   ├── DefaultEvent.java
        │                   ├── DropItemEvent.java
        │                   ├── ExplosionEvent.java
        │                   ├── GiveEffectEvent.java
        │                   ├── HealEvent.java
        │                   ├── ICustomEvent.java
        │                   ├── PlaceBlockEvent.java
        │                   ├── PlaceChestEvent.java
        │                   └── PlayerCommandEvent.java
        └── resources/
            ├── chests.yml
            ├── luckyblocks.yml
            ├── plugin.yml
            └── LuckyBlocks/
                └── animations/
                    └── particles.mcfunction
```

---

## Основные компоненты и их назначение

*   `LuckyBlockPlugin.java`: Главный класс плагина. Отвечает за инициализацию, регистрацию событий, команд, загрузку и перезагрузку конфигурации. Содержит статический флаг `debug` для управления отладочным выводом.
*   `ConfigManager.java`: Управляет загрузкой и доступом к данным из `luckyblocks.yml` и `chests.yml`. Предоставляет методы для получения информации о типах, уровнях, событиях и их параметрах, включая логику наследования через `require`.
*   `ICustomEvent.java`: Интерфейс для определения пользовательских событий. Любое новое событие должно реализовывать этот интерфейс.
*   `events/`: Пакет, содержащий реализации стандартных событий лакиблоков (Explosion, DropItem, PlaceBlock, PlaceChest, CommandExec, PlayerCommand, GiveEffect, Heal, Default).
*   `BlockBreakListener.java`: Слушатель события разрушения блока. Обрабатывает разрушение лакиблоков, определяет их тип и уровень, выбирает случайное событие и запускает его выполнение. Использует PersistentDataContainer (PDC) для хранения данных о лакиблоках в чанках.
*   `BlockPlaceListener.java`: Слушатель события установки блока. Регистрирует установленные лакиблоки в PDC чанка.
*   `BlockProtectionListener.java`: Слушатель событий, предотвращающих нежелательное воздействие на лакиблоки (поршни, горение, увядание листвы, распространение блоков, течение жидкостей).
*   `ExplosionListener.java`: Слушатель событий взрыва. Предотвращает разрушение лакиблоков от взрывов.
*   `LuckyBlockCommand.java`: Обработчик команд плагина (`/luckyblock`). Реализует команды для выдачи лакиблоков, перезагрузки конфигов, просмотра списка типов и добавления лута из сундуков в конфиги.
*   `LuckyBlockTabCompleter.java`: Предоставляет автодополнение для команд плагина.
*   `ProbabilityCalculator.java`: Отвечает за выбор случайного события на основе весов, указанных в конфиге, с учетом наследования через `require`.
*   `Replacer.java`: Утилита для замены плейсхолдеров (например, `%player%`, `%location%`, `%random:int:int%`) в строках команд и других местах.
*   `EventAnimationUtil.java`: Утилита для обработки анимаций и задержек перед выполнением основного действия события. Использует команду `/function` для вызова datapack-функций.
*   `EventChainUtil.java`: Утилита для выполнения цепочек команд или других событий, указанных в секции `execute` в конфиге.
*   `BlockData.java`: Простой класс-контейнер для хранения данных о лакиблоке (координаты, тип, уровень).
*   `LuckyBlockReplaceManager.java`: Статический менеджер для отслеживания локаций лакиблоков, которые временно разрешено заменять (используется, например, при установке сундука на место разрушенного лакиблока).

---

## Конфиг-файлы

### `luckyblocks.yml`

Основной файл для определения типов лакиблоков, уровней, набора событий и поведения при активации.

**Пример структуры:**
```yaml
types:
  positive:
    item:
      material: SPONGE
      custom-model-data: 1001
    levels:
      1:
        display-name: "&aПоложительный ЛакиБлок &eI уровня"
        events:
          EXPLOSION:
            enabled: false
            weight: 100
            power: 4.0
          DROP_ITEM:
            - enabled: true
              weight: 500
              items:
                - item: GOLDEN_APPLE
                  custom-model-data: 2
                  name: "Золотое яблоко"
                  lore: "Лучший ужин!"
                  amount: 2
          # остальные события (PLACE_BLOCK, PLACE_CHEST ...)
```
**Поля:**
- `types` — ключи (positive, negative и др.) — название типа лакиблока
- `item.material` — отображаемый материал (SPONGE, DIAMOND блок и др.)
- `item.custom-model-data` — для ресурспаков (необязательно)
- `levels` — уровни; для каждого уровня свой display-name и набор events
- `events` — поддерживаемые события (EXPLOSION, DROP_ITEM, PLACE_BLOCK, PLACE_CHEST, COMMAND_EXEC, PLAYER_COMMAND, GIVE_EFFECT, HEAL, DEFAULT, SUMMON)
  - `enabled` (bool) — использовать или нет данное событие
  - `weight` (int) — “шанс” выпадения события, влияет на выбор рандомного события
  - параметры события (см. описание каждого события ниже)
- `require` (строка или список строк, опционально) - позволяет наследовать события и их веса от других типов лакиблоков. Синтаксис: `тип` или `тип:множитель_веса`.

---

### `chests.yml`

Таблицы лута для событий типа PLACE_CHEST. Встраивается в конфиг через `item-table` (см. examples).

**Пример:**
```yaml
positive:
  main_loot:
    slots: 27
    loot:
      - items:
          - item: DIAMOND
            amount: 5
            name: "§bАлмаз"
        weight: 50
negative:
  bad_loot:
    slots: 27
    loot:
      - items:
          - item: DIRT
            amount: 5
            name: "&8Плохая грязь"
        weight: 10
```
**Поля:**
- `[type]` — positive/negative и т.д., должны совпадать с luckyblocks.yml
- `[item-table]` — название таблицы (main_loot, bad_loot и др.)
- `slots` — размер генерируемого сундука
- `loot` — список вариантов "набора лута" (у каждого weight и список items)

---

## Атрибуты предметов (items)

В любом месте, где фигурирует объект `items`, поддерживаются:
- `item` или `material`: (название предмета, материал Minecraft)
- `amount`: количество
- `name`: название (можно с цветами — &a, §b)
- `lore`: описание (одной строкой или через `\n` многострочно)
- `custom-model-data`: id для ресурспака
- `attributes`: список атрибутов (урон, здоровье и др.), например:
```yaml
attributes:
  - attribute: GENERIC_ATTACK_DAMAGE
    amount: 4
    operation: ADD_NUMBER # ADD_NUMBER, ADD_SCALAR, MULTIPLY_SCALAR_1
```

---

## Флаг отладки (`plugin.getDebug()`)

Статический флаг `plugin.getDebug()` контролирует вывод подробной отладочной информации в консоль сервера.

-   `false` (по умолчанию): Отладочная информация не выводится.
-   `true`: В консоль сервера выводятся подробные логи о процессе генерации сундуков, диагностике событий, дампах лута и действиях с лакиблоками.

Этот флаг полезен для разработчиков и администраторов серверов при отладке конфигурации или поиске проблем.

Состояние флага может быть изменено во время игры через команду `/luckyblock debug on/off`.

---

## Загрузка и перезагрузка конфигов

Плагин автоматически выгружает дефолтные luckyblocks.yml и chests.yml при первом запуске.
Для применения новых настроек используйте команду `/luckyblock reload`.

---

## Пример быстрого старта

1. Скопируйте исходные luckyblocks.yml и chests.yml в папку `plugins/LuckyBlocks` вашего сервера.
2. Можно свободно добавлять свои типы, уровни, кастомные события, не меняя структуру ядра.
3. Для включения отладки используйте команду `/luckyblock debug on`.

---

## Команды плагина

Плагин предоставляет следующие команды для взаимодействия:

- `/luckyblock` или `/lb`: Основная команда плагина.
  - `/luckyblock give <игрок> <тип> [уровень] [количество]`: Выдает указанному игроку лакиблок определенного типа и уровня. Если уровень не указан, используется случайный доступный уровень для данного типа.
  - `/luckyblock reload`: Перезагружает конфигурационные файлы `luckyblocks.yml` и `chests.yml`. Требует прав `luckyblocks.reload`.
  - `/luckyblock list`: Показывает список всех доступных типов лакиблоков из конфига.
  - `/luckyblock add lucky-table <type>`: Добавляет содержимое сундука, на который смотрит игрок, как новый вариант лута в событие DROP_ITEM для указанного типа лакиблока (уровень 1). Требует прав `luckyblocks.edit`.
  - `/luckyblock add chest-table <type> <tableName>`: Добавляет содержимое сундука, на который смотрит игрок, как новую таблицу лута в `chests.yml` с указанным именем (`tableName`) для указанного типа лакиблока. Требует прав `luckyblocks.edit`.
  - `/luckyblock debug [on|off]`: Включает или выключает отладочный вывод в консоль сервера. Требует прав `luckyblocks.debug`.
  - `/luckyblock help`: Показывает эту справку.

---

## Принцип работы

При разрушении лакиблока плагин выполняет следующие шаги:

1.  Проверяет, является ли разрушенный блок лакиблоком, зарегистрированным в конфигурации (используя PDC).
2.  Определяет тип и уровень лакиблока.
3.  Используя веса событий, указанные в `luckyblocks.yml` для данного типа и уровня (с учетом наследования через `require`), случайным образом выбирает одно событие для выполнения.
4.  Выполняет логику выбранного события, используя соответствующие параметры из конфига.
5.  Если для события заданы `animation` и `delay`, сначала проигрывается анимация (через `/function`), затем с задержкой выполняется основное действие.
6.  Если для события задана секция `execute`, после основного действия выполняется цепочка команд/событий.

---

## Расширение плагина: Создание собственных событий

Вы можете создавать собственные события, реализовав интерфейс `ICustomEvent`. Этот интерфейс имеет один метод `execute`, который содержит логику вашего события.

```java
public interface ICustomEvent {
    /**
     * Выполняет логику события.
     *
     * @param player Игрок, сломавший лаки блок.
     * @param location Местоположение лаки блока.
     * @param eventConfig Секция конфигурации для этого конкретного события из
     * config.yml.
     * @param plugin Экземпляр главного класса плагина.
     */
    void execute(Player player, Location location, ConfigurationSection eventConfig, LuckyBlockPlugin plugin);
}
```

-   `player`: Игрок, который активировал лакиблок.
-   `location`: Местоположение лакиблока.
-   `eventConfig`: Секция конфигурации из `luckyblocks.yml` для данного события, содержащая его параметры.
-   `plugin`: Экземпляр главного класса плагина.

После создания класса события, вам необходимо зарегистрировать его в `EventRegistry` плагина. Обычно это делается в методе `onEnable` главного класса плагина, добавляя ваш класс в `eventRegistry` Map.

---

## Все события и параметры (`events`)

В конфиге для каждого уровня лакиблока указываются поддерживаемые события (events) и их параметры. Вот полный список стандартных событий:

### EXPLOSION
**Описание:** Вызывает взрыв в точке лакиблока (аналог TNT, но с контролем параметров).
**Пример:**
```yaml
EXPLOSION:
  enabled: true
  weight: 100
  power: 4.0
  set-fire: true # опционально, поджигать ли блоки
  break-blocks: false # опционально, разрушать ли блоки
  animation: particles # опционально, название datapack-анимации
  delay: 2 # опционально, задержка в секундах перед взрывом
  execute: # опционально, цепочка команд/событий после взрыва
    CommandExecEvent:
      - "say Бум!"
```
**Параметры:**
- `enabled` (bool) — использовать или нет данное событие
- `weight` (int) — “шанс” выпадения события
- `power` (float) — сила взрыва (по аналогии с TNT = 4.0)
- `set-fire` (bool, опционально) - поджигать ли блоки
- `break-blocks` (bool, опционально) - разрушать ли блоки
- `animation` (строка, опционально) - название datapack-функции анимации (без `.mcfunction` и префикса `LuckyBlocks:animations/`)
- `delay` (double, опционально) - задержка в секундах перед выполнением основного действия (взрыва)
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### DROP_ITEM
**Описание:** Выдаёт игроку один или несколько предметов.
**Пример:**
```yaml
DROP_ITEM:
  enabled: true
  weight: 200
  item: DIAMOND
  amount: 3
  animation: particles # опционально
  delay: 1 # опционально
  execute: # опционально
    PlayerCommandEvent:
      - "say Получил алмазы!"
```
или, если много вариантов:
```yaml
DROP_ITEM:
  - enabled: true
    weight: 400
    items:
      - item: DIAMOND
        amount: 2
      - item: GOLDEN_APPLE
        amount: 1
    animation: particles # опционально
    delay: 1 # опционально
    execute: # опционально
      PlayerCommandEvent:
        - "say Получил алмазы и яблоко!"
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `item` (или `items`) — название предмета или список предметов (см. раздел “Атрибуты предметов”)
- `amount` (int) — количество (используется с `item`)
- Поддерживает все параметры из “атрибутов предметов” (custom-model-data, name, lore, attributes и др.) для каждого предмета в списке `items`.
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах перед дропом
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### PLACE_BLOCK
**Описание:** Устанавливает блоки (или несколько блоков) возле лакиблока (например, бриллиантовый блок сверху).
**Пример:**
```yaml
PLACE_BLOCK:
  enabled: true
  weight: 50
  blocks:
    - material: DIAMOND_BLOCK
      relative-coords: { x: 0, y: 1, z: 0 }
      custom-model-data: 100 # опционально
    - material: EMERALD_BLOCK
      relative-coords: { x: 2, y: 0, z: 0 }
  animation: particles # опционально
  delay: 0.5 # опционально
  execute: # опционально
    CommandExecEvent:
      - "setblock %x% %y% %z% air" # Пример: убрать лакиблок после установки
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `material` (строка) - материал блока (используется с одиночным блоком)
- `blocks` (список) - список блоков для установки. Каждый элемент списка имеет:
    - `material` (строка) - материал блока
    - `relative-coords` (объект) — смещение относительно лакиблока (`x`, `y`, `z`)
    - `custom-model-data` (int, опционально) — для ресурспака
- `relative-coords` (объект) — смещение относительно лакиблока (`x`, `y`, `z`) (используется с одиночным блоком)
- `custom-model-data` (int, опционально) — для ресурспака (используется с одиночным блоком)
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах перед установкой
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### PLACE_CHEST
**Описание:** Создаёт сундук с лутом по указанной таблице из `chests.yml`.
**Пример:**
```yaml
PLACE_CHEST:
  enabled: true
  weight: 40
  item-table: main_loot # или "random" для случайной таблицы из chests.yml для данного типа
  relative-coords: { x: 1, y: 0, z: 0 }
  replace-existing: true # опционально, заменять ли существующий блок сундуком
  animation: particles # опционально
  delay: 1.5 # опционально
  execute: # опционально
    PlayerCommandEvent:
      - "say Найден сундук!"
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `item-table` (строка) — название таблицы из chests.yml или "random"
- `relative-coords` (объект) — смещение
- `replace-existing` (bool, опционально) - заменять ли существующий блок сундуком
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах перед установкой сундука
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### COMMAND_EXEC
**Описание:** Выполняет указанные команды от имени сервера.
**Пример:**
```yaml
COMMAND_EXEC:
  enabled: true
  weight: 30
  command: "give %player% minecraft:diamond 3"
  animation: particles # опционально
  delay: 0.1 # опционально
  execute: # опционально
    PlayerCommandEvent:
      - "say Команда выполнена!"
```
или, если много команд:
```yaml
COMMAND_EXEC:
  enabled: true
  weight: 30
  commands:
    - "give %player% minecraft:diamond 3"
    - "effect give %player% speed 10 2"
  animation: particles # опционально
  delay: 0.1 # опционально
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `command` (строка) — одиночная команда
- `commands` (список строк) — список команд
- Допускаются плейсхолдеры (см. раздел "Поддерживаемые плейсхолдеры").
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах перед выполнением команд
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### PLAYER_COMMAND
**Описание:** Выполняет команду от имени игрока.
**Пример:**
```yaml
PLAYER_COMMAND:
  enabled: true
  weight: 25
  command: "say Я поймал лакиблок!"
  animation: particles # опционально
  delay: 0.1 # опционально
```
или, если много команд:
```yaml
PLAYER_COMMAND:
  enabled: true
  weight: 25
  commands:
    - "say Я поймал лакиблок!"
    - "me радуется"
  animation: particles # опционально
  delay: 0.1 # опционально
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `command` (строка) — одиночная команда
- `commands` (список строк) — список команд
- Допускаются плейсхолдеры (см. раздел "Поддерживаемые плейсхолдеры").
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах перед выполнением команд
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### HEAL
**Описание:** Лечит игрока и/или даёт доп. эффекты.
**Пример:**
```yaml
HEAL:
  enabled: true
  weight: 10
  amount: 8 # количество восстанавливаемого здоровья (половинок сердец)
  heal_percent: 50.0 # опционально, процент восстанавливаемого здоровья
  effects: # опционально, список эффектов зелья
    - REGENERATION
    - ABSORPTION
  animation: particles # опционально
  delay: 0.5 # опционально
  execute: # опционально
    PlayerCommandEvent:
      - "say Чувствую себя лучше!"
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `amount` (int, опционально) — сколько единиц здоровья восстановить (половинок сердец)
- `heal_percent` (double, опционально) — процент восстанавливаемого здоровья (от 0.0 до 100.0). Если указан, `amount` игнорируется.
- `effects` (список строк, опционально) — список эффектов зелья (по стандарту Minecraft)
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах перед лечением/эффектами
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### GIVE_EFFECT
**Описание:** Выдаёт игроку эффект зелья.
**Пример:**
```yaml
GIVE_EFFECT:
  enabled: true
  weight: 37
  effect: ABSORPTION # название эффекта (по стандарту Minecraft)
  amplifier: 2 # уровень эффекта
  duration: 120 # длительность в тиках (20 тиков = 1 секунда)
  animation: particles # опционально
  delay: 0.1 # опционально
  execute: # опционально
    PlayerCommandEvent:
      - "say Получил эффект!"
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `effect` (строка) — название эффекта зелья (по стандарту Minecraft)
- `amplifier` (int, опционально, по умолчанию 1) — уровень эффекта
- `duration` (int, опционально, по умолчанию 100) — длительность в тиках (20 тиков = 1 секунда)
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах перед выдачей эффекта
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### SUMMON
**Описание:** Призывает сущность(ей) в точке лакиблока.
**Пример:**
```yaml
SUMMON:
  enabled: true
  weight: 25
  entity: "zombie" # тип сущности (по стандарту Minecraft)
  count: 1 # количество сущностей
  animation: particles # опционально
  delay: 0.5 # опционально
  execute: # опционально
    CommandExecEvent:
      - "effect give @e[type=zombie,distance=..5] weakness 10 1" # Пример: дать слабость призванным зомби
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `entity` (строка) — тип сущности (по стандарту Minecraft)
- `count` (int, опционально, по умолчанию 1) — количество сущностей
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах перед призывом
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

### DEFAULT
**Описание:** Подстраховочное действие, если не получилось подобрать событие. Обычно ничего не делает или выдаёт небольшое сообщение.
**Пример:**
```yaml
DEFAULT:
  enabled: true
  weight: 40
  animation: particles # опционально
  delay: 0.1 # опционально
  execute: # опционально
    PlayerCommandEvent:
      - "say Ничего не произошло..."
```
**Параметры:**
- `enabled` (bool)
- `weight` (int)
- `animation` (строка, опционально) - название datapack-функции анимации
- `delay` (double, опционально) - задержка в секундах
- `execute` (секция, опционально) - секция для цепочки команд/событий (см. раздел "Цепочка событий")

---

## Поддерживаемые плейсхолдеры

В строках команд (`COMMAND_EXEC`, `PLAYER_COMMAND`) и других местах, где это предусмотрено логикой события, могут использоваться следующие плейсхолдеры, которые обрабатываются утилитой `Replacer`:

-   `%player%` или `@p`: Имя игрока, активировавшего лакиблок.
-   `%location%`: Координаты лакиблока (X, Y, Z).
-   `%x%`, `%y%`, `%z%`: Отдельные координаты лакиблока.
-   `~`, `~~`, `~~~`: Относительные координаты лакиблока (аналогично Minecraft командам).
-   `%random:int:int%`: Случайное целое число в заданном диапазоне (включая границы). Например, `%random:1:10%` даст число от 1 до 10.
-   `%random:float:float%`: Случайное число с плавающей точкой в заданном диапазоне. Например, `%random:0.0:1.0%` даст число от 0.0 до 1.0.
-   Другие плейсхолдеры могут быть добавлены в реализации пользовательских событий.

---

## Цепочка событий (`EventChainUtil`)

Плагин поддерживает выполнение последовательности команд или других событий, указанных в секции `execute` внутри конфигурации события. Это позволяет создавать сложные комбинации действий.

**Важно:** Секция `execute` может быть добавлена в конфигурацию *любого* события (не только на уровне типа/уровня лакиблока), позволяя выполнять команды или другие события после завершения основного действия.

Пример использования в `luckyblocks.yml`:

```yaml
events:
  MY_CUSTOM_EVENT:
    enabled: true
    weight: 100
    # Параметры MY_CUSTOM_EVENT
    execute:
      PlayerCommandEvent: # Выполнить команды от имени игрока
        - "say Привет от лакиблока!"
        - "me машет рукой"
      CommandExecEvent: # Выполнить команды от имени сервера
        - "give %player% diamond 1"
      # Можно вкладывать другие execute секции для более сложных цепочек
      execute:
        PlayerCommandEvent:
          - "say Вторая волна команд!"
```

В этом примере после выполнения логики `MY_CUSTOM_EVENT` будут последовательно выполнены команды из секции `execute`.

---

## Datapack анимации

Плагин поддерживает вызов datapack-функций для проигрывания анимаций перед выполнением основного действия события. Для этого в конфигурации события используется параметр `animation`, указывающий название функции без `.mcfunction` и префикса `LuckyBlocks:animations/`.

Файлы datapack-функций должны располагаться в папке `plugins/LuckyBlocks/animations/`. Например, файл `plugins/LuckyBlocks/animations/particles.mcfunction` будет вызван командой `/function LuckyBlocks:animations/particles`.(нет)

Пример содержимого `particles.mcfunction`:
```mcfunction
particle minecraft:explosion ~ ~1 ~ 0 0 0 0 1 force
```

---

## Технологии и поддержка

- Bukkit/Spigot API (Java)
- YAML-конфиги
- Гибкая система ивентов для расширений
- Поддержка Minecraft Datapacks для анимаций

---

**Автор:**
Ayrongames и Aeris совместно для Ayronix
